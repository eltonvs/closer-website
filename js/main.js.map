{"version":3,"sources":["dashboard.js","login_signup_modal.js","logout.js","smooth_scroll.js"],"names":["$","length","$user_name","$products_list","$form_register_product","$loading_div","hide","submit","event","preventDefault","post","CONFIG","server","register_product_url","serialize","data","update_dashboard","ajax","type","url","dash_url","beforeSend","show","success","update_name","name","update_products","products","do_logout","fadeOut","dataType","text","removeClass","products_list_html","forEach","product","html","click","$this","this","remove_product_url","addClass","ctx","document","getElementById","getContext","Chart","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","scales","yAxes","ticks","beginAtZero","$modal_title","$form_login","$form_signup","$forms_container","$login_alert","$signup_alert","$btn_login_signup","get","check_url","status","attr","switch_modal","$old","$new","title","css","height","animate","fadeIn","update_alert_login","window","location","replace","error","update_alert_signup","auth_url","register_url","logout_url","logout_link","not","pathname","hostname","target","hash","slice","scrollTop","Math","max","offset","top"],"mappings":"aAEAA,EAAE,WAGA,IADyBA,EAAE,cACHC,OACtB,OAAO,EAET,IAAIC,EAAaF,EAAE,cACfG,EAAiBH,EAAE,kBACnBI,EAAyBJ,EAAE,qBAC3BK,EAAeL,EAAE,gBAAgBM,OAErCF,EAAuBG,OAAO,SAAAC,GAC5BA,EAAMC,iBACNT,EAAEU,KAAKC,OAAOC,OAAOC,qBAAsBT,EAAuBU,YAAa,SAAAC,GAAA,OAAQC,KAAoB,UAG7G,IAAIA,EAAmB,WAErBhB,EAAEiB,MACAC,KAAM,MACNC,IAAKR,OAAOC,OAAOQ,SACnBC,WAAY,WAAA,OAAMhB,EAAaiB,QAC/BC,QAAS,SAAAR,GACHA,GACFS,EAAYT,EAAKU,MACjBC,EAAgBX,EAAKY,WAErBC,YAEFvB,EAAawB,WAEfC,SAAU,UAKdd,IAGA,IAAIQ,EAAc,SAAAC,GAAA,OAAQvB,EAAW6B,KAAKN,IAEtCC,EAAkB,SAAAC,GAEpB,GADAxB,EAAe6B,cACVL,GAAaA,EAAS1B,OAGpB,CACL,IAAIgC,EAAqB,OACzBN,EAASO,QAAQ,SAAAC,GAAA,OAAWF,GAAAA,OAA6BE,EAAQV,KAArC,uCAAgFU,EAAQV,KAAxF,8BAC5BQ,GAAsB,QACtB9B,EAAeiC,KAAKH,GAEpBjC,EAAE,0BAA0BqC,MAAM,SAAU7B,GAC1CA,EAAMC,iBACN,IAAI6B,EAAQtC,EAAEuC,MACdvC,EAAEU,KAAKC,OAAOC,OAAO4B,oBAAqBf,KAAMa,EAAMvB,KAAK,mBAAoB,SAAAA,GAAA,OAAQC,KAAoB,eAX7Gb,EAAesC,SAAS,oBACxBtC,EAAe4B,KAAK,gDAeJ,SAAAhB,GAClB,IAAI2B,EAAMC,SAASC,eAAe,UAAUC,WAAW,MACvD,IAAIC,MAAMJ,GACRxB,KAAM,OACNH,MACEgC,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,SAC/DC,WACEC,MAAO,gBACPlC,MAAO,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAC/BmC,iBAAkB,2BAClBC,aAAc,sBACdC,YAAa,IAGbH,MAAO,cACPlC,MAAO,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,IAC5BmC,iBAAkB,2BAClBC,aAAc,yBACdC,YAAa,KAGjBC,SACEC,QACEC,QACEC,OAAQC,aAAa,cCtFjCzD,EAAE,WAEA,IAD0BA,EAAE,uBACHC,OACvB,OAAO,EAET,IAAIyD,EAAe1D,EAAE,6BACjB2D,EAAc3D,EAAE,eAChB4D,EAAe5D,EAAE,gBACjB6D,EAAmB7D,EAAE,oBACrB8D,EAAe9D,EAAE,gBACjB+D,EAAgB/D,EAAE,iBAClBgE,EAAoBhE,EAAE,sBAE1BA,EAAEiE,IAAItD,OAAOC,OAAOsD,UAAW,SAAAnD,GACzBA,EAAKoD,SACPH,EAAkBjC,KAAK,aACvBiC,EAAkBI,KAAK,OAAQ,kBAC/BJ,EAAkBI,KAAK,eAAe,GACtCJ,EAAkBI,KAAK,eAAe,KAEvC,QAEH,IAAMC,EAAe,SAACC,EAAMC,EAAMC,GAChCd,EAAa3B,KAAKyC,GAClBR,EAAkBjC,KAAKyC,GACvBX,EAAiBY,IAAI,SAAUH,EAAKI,UACpCJ,EAAKzC,QAAQ,OAAQ,WAAA,OAAMgC,EAAiBc,SAASD,OAAQH,EAAKG,UAAW,OAAQ,WAAA,OAAMH,EAAKK,OAAO,aAGnGC,EAAqB,SAAA9D,GACzB+C,EAAa9B,cACTjB,EAAKoD,QACPL,EACGrB,SAAS,uBACTV,KAAK,4CACR+C,OAAOC,SAASC,QAAQ,oBAExBlB,EACGrB,SAAS,sBACTL,KAFH,kCAE0CrB,EAAKkE,OAC/CpB,EAAiBY,IAAI,SAAUd,EAAYe,YAIzCQ,EAAsB,SAAAnE,GAC1BgD,EAAc/B,cACVjB,EAAKoD,OACPJ,EACGtB,SAAS,uBACTV,KAAK,iCAERgC,EACGtB,SAAS,sBACTL,KAFH,qCAE6CrB,EAAKkE,OAEpDpB,EAAiBY,IAAI,SAAUb,EAAac,WAG9Cf,EAAYpD,OAAO,SAAAC,GACjBA,EAAMC,iBACNT,EAAEU,KAAKC,OAAOC,OAAOuE,SAAUxB,EAAY7C,YAAa,SAAAC,GAAA,OAAQ8D,EAAmB9D,IAAO,UAG5F6C,EAAarD,OAAO,SAAAC,GAClBA,EAAMC,iBACNT,EAAEU,KAAKC,OAAOC,OAAOwE,aAAcxB,EAAa9C,YAAa,SAAAC,GAAA,OAAQmE,EAAoBnE,IAAO,UAGlGf,EAAE,eAAeqC,MAAM,WAAA,OAAMgC,EAAaV,EAAaC,EAAc,aACrE5D,EAAE,cAAcqC,MAAM,WAAA,OAAMgC,EAAaT,EAAcD,EAAa,aCrEtE,IAAM/B,UAAY,WAChB5B,EAAEiE,IAAItD,OAAOC,OAAOyE,WAAY,SAAAtE,GAC1BA,EAAKoD,QACPW,OAAOC,SAASC,QAAQ,eAEzB,SAGLhF,EAAE,WACA,IAAIsF,EAActF,EAAE,gBACpB,IAAKsF,EAAYrF,OACf,OAAO,EAETqF,EAAYjD,MAAM,SAAA7B,GAChBA,EAAMC,iBACNmB,gBCdJ5B,EAAE,gBAECuF,IAAI,cACJA,IAAI,eACJlD,MAAM,SAAU7B,GAEf,GACEuE,SAASS,SAASR,QAAQ,MAAO,MAAQzC,KAAKiD,SAASR,QAAQ,MAAO,KACnED,SAASU,WAAalD,KAAKkD,SAC9B,CAEA,IAAIC,EAAS1F,EAAEuC,KAAKoD,OACpBD,EAASA,EAAOzF,OAASyF,EAAS1F,EAAE,SAAWuC,KAAKoD,KAAKC,MAAM,GAAK,MAEzD3F,SAETO,EAAMC,iBACNT,EAAE,cAAc2E,SACdkB,UAAWC,KAAKC,IAAIL,EAAOM,SAASC,IAAM,GAAI,IAC7C","file":"main.js","sourcesContent":["/* global Chart */\n\n$(() => {\n  // verify if is on dashboard page request\n  let $dashboard_wrapper = $('#dashboard');\n  if (!$dashboard_wrapper.length)\n    return false;\n\n  let $user_name = $('#user-name');\n  let $products_list = $('#products-list');\n  let $form_register_product = $('#register-product');\n  let $loading_div = $('#loading-div').hide();\n\n  $form_register_product.submit(event => {\n    event.preventDefault();\n    $.post(CONFIG.server.register_product_url, $form_register_product.serialize(), data => update_dashboard(), 'json');\n  });\n\n  let update_dashboard = () => {\n    // Request data from server\n    $.ajax({\n      type: 'GET',\n      url: CONFIG.server.dash_url,\n      beforeSend: () => $loading_div.show(),\n      success: data => {\n        if (data) {\n          update_name(data.name);\n          update_products(data.products);\n        } else {\n          do_logout();\n        }\n        $loading_div.fadeOut();\n      },\n      dataType: 'JSON'\n    });\n  };\n\n  // Update Dashboard\n  update_dashboard();\n\n  // Create functions to update data\n  let update_name = name => $user_name.text(name);\n\n  let update_products = products => {\n    $products_list.removeClass();\n    if (!products || !products.length) {\n      $products_list.addClass('alert alert-info');\n      $products_list.text('No products found. Register a new product!');\n    } else {\n      let products_list_html = '<ul>';\n      products.forEach(product => products_list_html += `<li>${product.name} - <a href=\"#\" data-remove-product=\"${product.name}\">Remove Product</a></li>`);\n      products_list_html += '</ul>';\n      $products_list.html(products_list_html);\n\n      $('a[data-remove-product]').click(function (event) {\n        event.preventDefault();\n        let $this = $(this);\n        $.post(CONFIG.server.remove_product_url, {name: $this.data('remove-product')}, data => update_dashboard(), 'json');\n      });\n    }\n  };\n\n  let update_charts = data => {\n    let ctx = document.getElementById('canvas').getContext('2d');\n    new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: ['14/06', '15/06', '16/06', '17/06', '18/06', '19/06', '20/06'],\n        datasets: [{\n          label: '# of Visitors',\n          data: [12, 19, 23, 15, 17, 20, 18],\n          backgroundColor: ['rgba(255, 99, 132, 0.2)'],\n          borderColor: ['rgba(255,99,132,1)'],\n          borderWidth: 1\n        },\n        {\n          label: '# of Buyers',\n          data: [6, 17, 15, 7, 7, 15, 12],\n          backgroundColor: ['rgba(54, 162, 235, 0.2)'],\n          borderColor: ['rgba(54, 162, 235, 1)'],\n          borderWidth: 1\n        }]\n      },\n      options: {\n        scales: {\n          yAxes: [{\n            ticks: {beginAtZero: true}\n          }]\n        }\n      }\n    });\n  };\n\n  update_charts();\n});\n","$(() => {\n  let $login_signup_modal = $('#login-signup-modal');\n  if (!$login_signup_modal.length)\n    return false;\n\n  let $modal_title = $('#modal-login-signup-title');\n  let $form_login = $('#login-form');\n  let $form_signup = $('#signup-form');\n  let $forms_container = $('#forms-container');\n  let $login_alert = $('#login-alert');\n  let $signup_alert = $('#signup-alert');\n  let $btn_login_signup = $('#login-signup-link');\n\n  $.get(CONFIG.server.check_url, data => {\n    if (data.status) {\n      $btn_login_signup.text('Dashboard');\n      $btn_login_signup.attr('href', 'dashboard.html');\n      $btn_login_signup.attr('data-target', false);\n      $btn_login_signup.attr('data-toggle', false);\n    }\n  }, 'json');\n\n  const switch_modal = ($old, $new, title) => {\n    $modal_title.text(title);\n    $btn_login_signup.text(title);\n    $forms_container.css('height', $old.height());\n    $old.fadeOut('fast', () => $forms_container.animate({height: $new.height()}, 'fast', () => $new.fadeIn('fast')));\n  };\n\n  const update_alert_login = data => {\n    $login_alert.removeClass();\n    if (data.status) {\n      $login_alert\n        .addClass('alert alert-success')\n        .text('User Logged with success! Redirecting...');\n      window.location.replace('dashboard.html');\n    } else {\n      $login_alert\n        .addClass('alert alert-danger')\n        .html(`<strong>Login Failed</strong>: ${data.error}`);\n      $forms_container.css('height', $form_login.height());\n    }\n  };\n\n  const update_alert_signup = data => {\n    $signup_alert.removeClass();\n    if (data.status) {\n      $signup_alert\n        .addClass('alert alert-success')\n        .text('User Registered with success!');\n    } else {\n      $signup_alert\n        .addClass('alert alert-danger')\n        .html(`<strong>Register Failed</strong>: ${data.error}`);\n    }\n    $forms_container.css('height', $form_signup.height());\n  };\n\n  $form_login.submit(event => {\n    event.preventDefault();\n    $.post(CONFIG.server.auth_url, $form_login.serialize(), data => update_alert_login(data), 'json');\n  });\n\n  $form_signup.submit(event => {\n    event.preventDefault();\n    $.post(CONFIG.server.register_url, $form_signup.serialize(), data => update_alert_signup(data), 'json');\n  });\n\n  $('#signup_btn').click(() => switch_modal($form_login, $form_signup, 'Sign up'));\n  $('#login_btn').click(() => switch_modal($form_signup, $form_login, 'Login'));\n});\n","const do_logout = () => {\n  $.get(CONFIG.server.logout_url, data => {\n    if (data.status) {\n      window.location.replace('index.html');\n    }\n  }, 'json');\n};\n\n$(() => {\n  let logout_link = $('#logout-link');\n  if (!logout_link.length)\n    return false;\n\n  logout_link.click(event => {\n    event.preventDefault();\n    do_logout();\n  });\n});\n","// Select all links with hashes\n$('a[href*=\"#\"]')\n  // Remove links that don't actually link to anything\n  .not('[href=\"#\"]')\n  .not('[href=\"#0\"]')\n  .click(function (event) {\n    // On-page links\n    if (\n      location.pathname.replace(/^\\//, '') === this.pathname.replace(/^\\//, '')\n      && location.hostname === this.hostname\n    ) {\n      // Figure out element to scroll to\n      let target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\n      // Does a scroll target exist?\n      if (target.length) {\n        // Only prevent default if animation is actually gonna happen\n        event.preventDefault();\n        $('html, body').animate({\n          scrollTop: Math.max(target.offset().top - 25, 0)\n        }, 1000);\n      }\n    }\n  });\n"]}